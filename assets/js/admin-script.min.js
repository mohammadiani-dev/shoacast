/******/ (() => { // webpackBootstrap
var __webpack_exports__ = {};
/*!***********************************!*\
  !*** ./assets/js/admin-script.js ***!
  \***********************************/
jQuery(document).ready(function ($) {
  $(document).on("click", ".guest-select-avatar", function (event) {
    var frame;
    var file_link_input = $(this).closest(".form-field").find(".shoa-guest-avatar");
    var avatar_show_image = $(this).closest(".form-field").find(".guest-select-avatar-img");
    event.preventDefault();

    if (frame) {
      frame.open();
      return;
    }

    frame = wp.media({
      title: "تصویر مهمان را انتخاب کنید",
      button: {
        text: "انتخاب تصویر"
      },
      multiple: false
    });
    frame.on("select", function () {
      var attachment = frame.state().get("selection").first().toJSON();
      file_link_input.val(attachment.url);
      avatar_show_image.attr("src", attachment.url); // imgIdInput.val(attachment.id);
    });
    frame.open();
  });
  $(document).on("click", "#add_shoa_part", function (event) {
    event.preventDefault();
    $(".shoa-parts").append("\n            <div class=\"part\">\n\n                <div class=\"remove\">   \n                    <span class=\"dashicons dashicons-remove\"></span>\n                    <span>\u062D\u0630\u0641</span>\n                </div>\n\n                <div class=\"field_wrapper\">\n                    <div class=\"input_wrapper\">\n                        <div class=\"meta_details\">\n\n                            <div>\n                                <label>\u0634\u0645\u0627\u0631\u0647 \u0628\u062E\u0634</label>\n                                <input type=\"text\" class=\"shoa_part_number\" placeholder=\"\u0645\u062B\u0644\u0627 \u0628\u062E\u0634 \u0627\u0648\u0644\" value=\"\">\n                            </div>\n\n                            <div>\n                                <label>\u0632\u06CC\u0631 \u0639\u0646\u0648\u0627\u0646</label>\n                                <input type=\"text\" class=\"shoa_subtitle\" placeholder=\"\u0632\u06CC\u0631 \u0639\u0646\u0648\u0627\u0646 (\u0627\u062E\u062A\u06CC\u0627\u0631\u06CC)\" value=\"\">\n                            </div>\n\n                        </div>\n\n                        <div class=\"meta_details\">\n\n                            <div>\n                                <label>\u0644\u06CC\u0646\u06A9 \u0641\u0627\u06CC\u0644 \u0635\u0648\u062A\u06CC</label>\n                                <input type=\"text\" class=\"shoa_sound_file_url\" placeholder=\"https://\" dir=\"ltr\" value=\"\">\n                            </div>\n\n                            <div>\n                                <label>\u0644\u06CC\u0646\u06A9 \u0641\u0627\u06CC\u0644 \u0648\u06CC\u062F\u0626\u0648\u06CC\u06CC \u06CC\u0627 \u0634\u0646\u0627\u0633\u0647 \u0622\u067E\u0627\u0631\u0627\u062A</label>\n                                <input type=\"text\" class=\"shoa_video_file_url\" placeholder=\"https://     Or     aparat video ID\" dir=\"ltr\" value=\"\">\n                            </div>\n\n                        </div>\n                    </div>\n                    <div class=\"image_select\">\n                        <img src=\"../wp-content/plugins/shoacast/assets/img/placeholder.png\">\n                        <input type=\"hidden\" class=\"part_thumbanil\">\n                    </div>\n                </div>\n            </div>\n        ");
  });
  $(document).on("click", ".shoa-parts .part .remove", function (e) {
    e.preventDefault();
    $(this).closest(".part").remove();
  });
  $(document).one("click", "div#major-publishing-actions #publish", function (e) {
    e.preventDefault();
    $("#shoa_parts_list").val(JSON.stringify(get_podcast_parts()));
    $(this).trigger("click");
  });
  $(document).on("click", ".shoa-parts .part .image_select img", function (e) {
    var frame;
    var image_place_holder = $(this);
    var file_link_input = $(this).closest(".image_select").find(".part_thumbanil");
    e.preventDefault();

    if (frame) {
      frame.open();
      return;
    }

    frame = wp.media({
      title: "تصویر شاخص بخش را انتخاب کنید",
      button: {
        text: "انتخاب تصویر شاخص"
      },
      multiple: false
    });
    frame.on("select", function () {
      var attachment = frame.state().get("selection").first().toJSON();
      file_link_input.val(attachment.id);
      image_place_holder.attr("src", attachment.url); // imgIdInput.val(attachment.id);
    });
    frame.open();
  });

  function get_podcast_parts() {
    var parts = [];
    $.each($(".shoa-parts .part"), function (i, v) {
      var part = {};
      part.number = $(this).find(".shoa_part_number").val();
      part.subtitle = $(this).find(".shoa_subtitle").val();
      part.sound_file_url = $(this).find(".shoa_sound_file_url").val();
      part.video_file_url = $(this).find(".shoa_video_file_url").val();
      part.part_thumbanil = $(this).find(".part_thumbanil").val();
      parts.push(part);
    });
    return parts;
  }
});
/******/ })()
;